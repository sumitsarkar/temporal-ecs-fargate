# Serving HTML through API Gateway for AWS Lambda
service: temporal-sql-migration

frameworkVersion: "3"

package:
  exclude:
    - deployment/**
    - static/**
    - .env**
    - .idea/**
    - serverless-config-environment.yml
    - .serverless/**
    - .cache/**
    - .yarn/**
    - .docs/**
    - terraform/**
    - dev/**
    - node_modules/.cache/**

provider:
  name: aws
  runtime: nodejs14.x
  region: ap-south-1
  memorySize: 128
  stage: ${param:stage, 'dev'}

  deploymentBucket:
    name: s3-bucket-for-lambdas # Deployment bucket name. Default is generated by the framework
    serverSideEncryption: AES256 # when using server-side encryption
    tags: # Tags that will be added to each of the deployment resources
      environment: ${param:stage, 'prod'}
  deploymentPrefix: ${self:service} # The S3 prefix under which deployed artifacts should be stored. Default is serverless


functions:
  temporal-sql-migrate:
    handler: src/index.handler
    timeout: 900

plugins:
  - serverless-offline
  - serverless-dotenv-plugin
